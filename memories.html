<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuerdos ðŸ“¸</title>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="memories-style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Outfit:wght@300;400;500;600;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="bg-gradient"></div>

    <header class="app-header">
        <div class="logo">Recuerdos ðŸ“¸</div>
    </header>

    <main class="memory-container fade-in">
        <div class="stack-wrapper">
            <!-- Card 3 (Bottom) -->
            <div class="memory-card stacked" style="--i:2">
                <div class="card-inner">
                    <div class="img-box black-glow">
                        <img src="imagen3.png" alt="Recuerdo 3" class="memory-img">
                    </div>
                    <div class="card-text">Y sufriendo por huevadas</div>
                </div>
            </div>
            <!-- Card 2 (Middle) -->
            <div class="memory-card stacked" style="--i:1">
                <div class="card-inner">
                    <div class="img-box red-glow">
                        <img src="imagen2.png" alt="Recuerdo 2" class="memory-img">
                    </div>
                    <div class="card-text">Siempre tan linda</div>
                </div>
            </div>
            <!-- Card 1 (Top) -->
            <div class="memory-card stacked" style="--i:0">
                <div class="card-inner">
                    <div class="img-box black-glow">
                        <img src="imagen1.png" alt="Recuerdo 1" class="memory-img">
                    </div>
                    <div class="card-text">Mirella</div>
                </div>
            </div>
        </div>

        <div class="hint-text">
            <i class="fas fa-hand-pointer"></i>
            <p>Toca la carta para ver la siguiente</p>
        </div>
    </main>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="garden.html" class="nav-item">
            <i class="fas fa-seedling"></i>
            <span>Flores</span>
        </a>
        <a href="memories.html" class="nav-item active">
            <i class="fas fa-images"></i>
            <span>Recuerdos</span>
        </a>
        <a href="surprise.html" class="nav-item">
            <i class="fas fa-gift"></i>
            <span>Sorpresa</span>
        </a>
    </nav>

    <script>
        const cards = document.querySelectorAll('.memory-card');
        const wrapper = document.querySelector('.stack-wrapper');
        let isAnimating = false;

        cards.forEach((card) => {
            card.addEventListener('click', () => {
                if (isAnimating) return;
                isAnimating = true;

                // 1. Move the card away
                card.classList.add('away');

                // 2. Wait for the slide-out animation
                setTimeout(() => {
                    card.classList.remove('away');
                    // 3. Move the card to the bottom of the stack (internally in DOM)
                    wrapper.prepend(card);

                    // 4. Update the visual styles (--i) for all cards
                    const allCards = wrapper.querySelectorAll('.memory-card');
                    allCards.forEach((c, index) => {
                        // The last card in DOM (index 2) is the top one visually
                        // We want: 
                        // Top card (last in DOM): --i: 0
                        // Middle card (second): --i: 1
                        // Bottom card (first in DOM): --i: 2
                        const visualIndex = allCards.length - 1 - index;
                        c.style.setProperty('--i', visualIndex);
                    });

                    isAnimating = false;
                }, 600);
            });
        });
    </script>
</body>

</html>